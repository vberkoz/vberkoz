---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";
import { GoogleAnalytics } from "astro-google-analytics";
import { Button } from "@/components/ui/button";
const {
    pageTitle,
    pageDescription,
    pageKeywords,
    pageAuthor,
    pageOgTitle,
    pageOgDescription,
    pageOgUrl,
    pageOgType,
} = Astro.props;
---

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <title>{pageTitle} | Vasyl Berkoz</title>
        <meta name="description" content={pageDescription} />
        <meta name="keywords" content={pageKeywords} />
        <meta name="author" content={pageAuthor} />
        <meta property="og:title" content={pageOgTitle} />
        <meta property="og:description" content={pageOgDescription} />
        <meta property="og:type" content={pageOgType} />
        <meta property="og:url" content={pageOgUrl} />
        <link rel="canonical" href={pageOgUrl} />
        <link rel="sitemap" href="/sitemap-index.xml" />

        <!-- Google Analytics -->
        <GoogleAnalytics id="G-HGPTWSRZT5" />

        <!-- Google AdSense -->
        <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8900288506226914"
            crossorigin="anonymous"></script>
    </head>
    <body class="min-h-screen flex flex-col">
        <Header />
        <main class="flex-grow">
            <div class="h-24"></div>
            <slot />
        </main>
        <Footer />
        <div id="cookie-banner" class="ml-auto fixed bottom-4 left-4 right-4 bg-zinc-200 dark:bg-zinc-700 border shadow-md p-4 rounded-xl max-w-md z-50 hidden">
            <p class="text-sm text-gray-800 dark:text-gray-200">
                We use cookies to enhance your experience and show relevant ads. See our <a href="/privacy-policy" class="hover:text-foreground transition-colors underline">Privacy Policy</a>.
            </p>
            <div class="flex justify-end mt-4 gap-2">
                <Button id="accept-cookies">Accept</Button>
                <Button id="reject-cookies" variant="outline">Reject</Button>
            </div>
        </div>
        <script>
            import "../scripts/menu.js";
            const banner = document.getElementById("cookie-banner");
            const accepted = localStorage.getItem("cookie-consent");

            if (!accepted) banner!.classList.remove("hidden");

            document.getElementById("accept-cookies")!.onclick = () => {
                localStorage.setItem("cookie-consent", "accepted");
                banner!.classList.add("hidden");
            };

            document.getElementById("reject-cookies")!.onclick = () => {
                localStorage.setItem("cookie-consent", "rejected");
                banner!.classList.add("hidden");
            };
        </script>
    </body>
</html>
